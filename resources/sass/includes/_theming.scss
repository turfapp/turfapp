/*!
 * TurfApp - TurfApp - An alternative for paper tally lists.
 *  Copyright (C) 2021  Marijn van Wezel
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <https://www.gnu.org/licenses/>.
 */

/*!
 * This file is mostly based on this article by Katie McTigue.
 *
 * https://medium.com/@katiemctigue/how-to-create-a-dark-mode-in-sass-609f131a3995
 */

@use 'theme-light';
@use 'theme-dark';

$color-primary: 'color-primary';
$color-secondary: 'color-secondary';
$color-tertiary: 'color-tertiary';

$glyph-primary: 'glyph-primary';
$glyph-secondary: 'glyph-secondary';
$glyph-tertiary: 'glyph-tertiary';

$glyph-blue: 'glyph-blue';
$glyph-blue-override: 'glyph-blue-override';

$themes: (
    light: (
        $color-primary: theme-light.$color-primary,
        $color-secondary: theme-light.$color-secondary,
        $color-tertiary: theme-light.$color-tertiary,
        $glyph-primary: theme-light.$glyph-primary,
        $glyph-secondary: theme-light.$glyph-secondary,
        $glyph-tertiary: theme-light.$glyph-tertiary,
        $glyph-blue: theme-light.$glyph-blue,
        $glyph-blue-override: theme-light.$glyph-blue-override
    ),
    dark: (
        $color-primary: theme-dark.$color-primary,
        $color-secondary: theme-dark.$color-secondary,
        $color-tertiary: theme-dark.$color-tertiary,
        $glyph-primary: theme-dark.$glyph-primary,
        $glyph-secondary: theme-dark.$glyph-secondary,
        $glyph-tertiary: theme-dark.$glyph-tertiary,
        $glyph-blue: theme-dark.$glyph-blue,
        $glyph-blue-override: theme-dark.$glyph-blue-override
    ),
);

@mixin themed() {
    @each $theme, $map in $themes {
        .ta\:#{$theme} & {
            $theme-map: () !global;
            @each $key, $submap in $map {
                $value: map-get(map-get($themes, $theme), '#{$key}');
                $theme-map: map-merge($theme-map, ($key: $value)) !global;
            }
            @content;
            $theme-map: null !global;
        }
    }
}

@function t($key) {
    @return map-get($theme-map, $key);
}
